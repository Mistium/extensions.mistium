html,
body { min-height: max(100%, 100vh); scroll-behavior: smooth; }

:root {
  --font-sans: 'Poppins', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, sans-serif;
  --radius-xs: 3px; --radius-sm: 4px; --radius: 8px; --radius-pill: 999px;
  --ease: cubic-bezier(.4,0,.2,1);
  --shadow-sm: 0 1px 3px rgba(0,0,0,.5);
  --shadow: 0 2px 8px rgba(0,0,0,.6);
  --shadow-lg: 0 4px 16px rgba(0,0,0,.7);
  --color-accent: #9d81c7;
  --color-accent-hover: #b399d4;
  --color-accent-rgb: 157 129 199;
  --color-bg: #0a0a0a; --color-bg-alt:#0f0f0f; --color-bg-soft:#151515; --color-surface:#1a1a1a;
  --color-border: rgba(157,129,199,0.15); --color-border-strong: rgba(157,129,199,0.3);
  --color-text: #e8e8e8; --color-text-dim:#a0a0a0; --color-text-faint:#666666;
  --color-danger:#ff5470; --color-warn:#f0ad4e; --color-info:#4dbaff; --color-success:#4bd680;
  --focus-ring: 0 0 0 2px #0a0a0a, 0 0 0 4px var(--color-accent);
  color-scheme: dark;
}

html[data-theme='light'] {
  --color-bg:#fafafa; --color-bg-alt:#f5f5f5; --color-bg-soft:#eeeeee; --color-surface:#ffffff;
  --color-border: rgba(157,129,199,0.2); --color-border-strong: rgba(157,129,199,0.4);
  --color-text:#1a1a1a; --color-text-dim:#4a4a4a; --color-text-faint:#7a7a7a;
  --focus-ring: 0 0 0 2px #ffffff,0 0 0 4px var(--color-accent);
  --shadow-sm: 0 1px 3px rgba(0,0,0,.1);
  --shadow: 0 2px 8px rgba(0,0,0,.15);
  --shadow-lg: 0 4px 16px rgba(0,0,0,.2);
  color-scheme: light;
}

body {
  font-family: var(--font-sans);
  margin: 0; padding: 0; line-height: 1.6; letter-spacing: .02em;
  background: var(--color-bg);
  color: var(--color-text); -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
}

/* Typography */
h1,h2,h3,h4,h5,h6 { font-weight:600; margin:0 0 .75rem; line-height:1.2; }
h1 { font-size: clamp(2rem,3.5vw,3.5rem); color: var(--color-text); letter-spacing:-0.02em; font-weight:700; }
h2 { font-size: clamp(1.5rem,2.5vw,2.2rem); color: var(--color-text); display:flex; align-items:center; gap:.65ch; font-weight:600; }
p { margin:0 0 1rem; color: var(--color-text-dim); }
a { color: var(--color-accent); text-decoration:none; font-weight:500; position:relative; transition:color .2s var(--ease); }
a:hover { color: var(--color-accent-hover); }
a:focus-visible { outline:none; box-shadow: var(--focus-ring); border-radius: var(--radius-xs); }

html:not(.user-tabbing) :focus { outline:none; }
html.user-tabbing :focus-visible { box-shadow: var(--focus-ring); border-radius: var(--radius-xs); }

/* Navigation */
.nav-container {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 2rem;
  background-color: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  position: sticky;
  top: 0;
  z-index: 1000;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

.logo {
  font-size: 1.5rem;
  font-weight: bold;
  color: #57cdac;
}

.nav-menu {
  list-style-type: none;
  margin: 0;
  padding: 0;
  display: flex;
  gap: 1.5rem;
}

.nav-menu li {
  display: inline;
}

.nav-menu li a {
  text-decoration: none;
  color: #fff;
  font-weight: 500;
  padding: 0.5rem 0;
  position: relative;
}

.nav-menu li a::after {
  content: '';
  position: absolute;
  width: 0;
  height: 2px;
  bottom: 0;
  left: 0;
  background-color: #57cdac;
  transition: width 0.3s ease;
}

.nav-menu li a:hover::after {
  width: 100%;
}

/* Content */
.content { max-width: 1400px; margin:0 auto; padding:3rem clamp(1rem,3vw,2rem) 4rem; }

.site-hero { padding: clamp(2rem,4vw,3rem) 0 clamp(1.5rem,3vw,2rem); background: var(--color-bg); }
.site-hero .inner { max-width:1400px; margin:0 auto; padding: 0 clamp(1rem,3vw,2rem); }
.hero-content { display:flex; align-items:center; justify-content:space-between; gap:2rem; flex-wrap:wrap; margin-bottom:1rem; }
.hero-left { display:flex; align-items:center; gap:1rem; }
.brand-avatar { width:56px; height:56px; border-radius:50%; object-fit:cover; border:2px solid var(--color-border); background:var(--color-bg-soft); }
.hero-text { display:flex; flex-direction:column; gap:.25rem; }
.site-title { font-size: clamp(1.75rem,3vw,2.5rem); margin:0; font-weight:700; letter-spacing:-.02em; }
.tagline { font-size: clamp(.9rem,1.2vw,1rem); font-weight:400; color: var(--color-text-dim); margin:0; }
.hero-right { display:flex; align-items:center; }
.disclaimer { font-size:.85rem; color: var(--color-text-faint); max-width: 700px; line-height:1.6; margin:0; }

.skip-link { position:absolute; top:-50px; left:0; background:var(--color-accent); color:#000; padding:.75rem 1rem; font-weight:600; border-radius:0 0 var(--radius-sm) 0; z-index:999; transition:top .3s; }
.skip-link:focus { top:0; }

.controls-bar { background: var(--color-bg-alt); border-top: 1px solid var(--color-border); border-bottom: 1px solid var(--color-border); padding: 1rem 0; position: sticky; top: 0; z-index: 100; backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); }
.controls-bar .inner { max-width:1400px; margin:0 auto; padding: 0 clamp(1rem,3vw,2rem); }
.controls { display:flex; gap:1rem; align-items:center; flex-wrap:wrap; }
.search-wrapper { position:relative; display:flex; align-items:center; flex:1; min-width:240px; }
#searchInput { background: var(--color-bg-soft); border:1px solid var(--color-border); color: var(--color-text); padding:.65rem 2.5rem .65rem 1rem; border-radius: var(--radius-sm); font-size:.9rem; width:100%; transition: border-color .25s var(--ease), background .25s var(--ease); }
#searchInput:focus { border-color: var(--color-accent); outline:none; background: var(--color-surface); }
.clear-btn { position:absolute; right:.4rem; background:transparent; border:none; color: var(--color-text-faint); font-size:1.3rem; cursor:pointer; padding:.3rem .5rem; border-radius: var(--radius-xs); line-height:1; transition: color .2s; }
.clear-btn:hover { color: var(--color-text); }

select#sortSelect { background: var(--color-bg-soft); border:1px solid var(--color-border); color: var(--color-text); padding:.65rem 1rem; border-radius: var(--radius-sm); font-size:.85rem; font-weight:500; cursor:pointer; min-width:160px; transition: border-color .25s var(--ease), background .25s var(--ease); }
select#sortSelect:focus { border-color: var(--color-accent); outline:none; background: var(--color-surface); }

.toggle { display:inline-flex; align-items:center; gap:.6rem; font-size:.8rem; font-weight:500; cursor:pointer; user-select:none; color: var(--color-text-dim); }
.toggle input { display:none; }
.toggle-track { --h:22px; width:46px; height:var(--h); background: var(--color-bg-soft); border:1px solid var(--color-border); border-radius: var(--radius-pill); position:relative; display:inline-block; transition: background .3s var(--ease), border-color .3s; }
.toggle-thumb { position:absolute; top:3px; left:3px; width:16px; height:16px; background: var(--color-accent); border-radius:50%; box-shadow: var(--shadow-sm); transition: transform .35s var(--ease); }
.toggle input:checked + .toggle-track .toggle-thumb { transform: translateX(24px); }
.toggle input:checked + .toggle-track { background: var(--color-surface); border-color: var(--color-border-strong); }
.toggle-text { font-size:.75rem; letter-spacing:.05em; text-transform:uppercase; }

.section-block { margin: 0 0 4rem; }
.section-title { font-size: clamp(1.5rem,2.5vw,1.8rem); margin:0 0 1.5rem; font-weight:600; color: var(--color-text); letter-spacing:-.01em; }

.card-grid { display:grid; gap:1rem; grid-template-columns: repeat(auto-fill,minmax(260px,1fr)); }
.featured-grid { grid-template-columns: repeat(auto-fill,minmax(280px,1fr)); gap:1.25rem; }
.gallery-grid { display:grid; gap:.75rem; grid-template-columns: repeat(auto-fill,minmax(200px,1fr)); }

/* Gallery Links */
.gallery-link { text-decoration:none; color:inherit; display:block; width:100%; }
.gallery-link[hidden] { display:none !important; }
.gallery-link:focus-visible { outline:none; border-radius: var(--radius); }
.gallery-link:focus-visible .profile-card, .gallery-link:focus-visible .gallery-card { box-shadow: var(--focus-ring); }

/* Profile Cards */
.profile-card { position:relative; display:flex; flex-direction:column; padding:1.25rem; background: var(--color-bg-alt); border:1px solid var(--color-border); border-radius: var(--radius); overflow:hidden; transition: border-color .25s var(--ease); min-height:100%; }
.profile-card:hover { border-color: var(--color-border-strong); }
.profile-card:focus-visible { outline:none; box-shadow: var(--focus-ring); }
.profile-card h2 { font-size:1.15rem; margin:0 0 .5rem; color: var(--color-text); font-weight:600; letter-spacing:-.01em; display:flex; align-items:center; flex-wrap:wrap; gap:.5rem; transition: color .2s var(--ease); }
.profile-card:hover h2 { color: var(--color-accent); }
.card-content { display:flex; flex-direction:column; gap:.75rem; flex:1; }
.profile-image { border-radius: var(--radius-sm); width:100%; aspect-ratio: 16/10; object-fit: contain; background: var(--color-bg-soft); border: 1px solid var(--color-border); overflow:hidden; padding:12px; margin-bottom:.5rem; }
.profile-image.fallback { padding:16%; background: var(--color-bg-soft); }
.ext-desc { font-size:.8rem; line-height:1.5; margin:0; color: var(--color-text-faint); flex:1; }

/* Gallery Cards */
.gallery-card { border:1px solid var(--color-border); background: var(--color-bg-alt); display:flex; align-items:center; justify-content:center; padding:1rem; border-radius: var(--radius); min-height:80px; transition: border-color .25s var(--ease); }
.gallery-card:hover { border-color: var(--color-border-strong); }
.gallery-card h2 { font-size:.95rem; margin:0; color: var(--color-text-dim); font-weight:500; text-align:center; transition: color .2s; }
.gallery-card:hover h2 { color: var(--color-text); }

/* Version Tags */
.version-tag { display:inline-flex; align-items:center; gap:.35rem; padding:.3rem .7rem; border-radius: var(--radius-sm); font-size:.65rem; font-weight:600; line-height:1; text-transform:uppercase; letter-spacing:.05em; background: var(--color-bg-soft); color: var(--color-text-faint); border: 1px solid var(--color-border); }
.version-tag::before { content:""; width:6px; height:6px; border-radius:50%; background: currentColor; }
.new-tag { background: var(--color-accent); color:#0a0a0a !important; border-color: var(--color-accent); }
.new-tag::before { background: #0a0a0a; }
.updated-tag { background: var(--color-warn); color:#0a0a0a !important; border-color: var(--color-warn); }
.updated-tag::before { background: #0a0a0a; }

/* Responsive Design */
@media (max-width: 900px) {
  .hero-content { flex-direction:column; align-items:flex-start; }
  .hero-right { width:100%; justify-content:flex-start; }
  .controls { flex-direction:column; gap:.75rem; }
  .search-wrapper { width:100%; min-width:unset; }
  select#sortSelect { width:100%; }
  .section-block { margin-bottom:3rem; }
  .card-grid { grid-template-columns: repeat(auto-fill,minmax(240px,1fr)); }
  .featured-grid { grid-template-columns: repeat(auto-fill,minmax(260px,1fr)); }
}

@media (max-width: 600px) {
  .hero-left { flex-direction:column; align-items:flex-start; text-align:left; }
  .brand-avatar { width:48px; height:48px; }
  .card-grid, .featured-grid { grid-template-columns: 1fr; }
  .gallery-grid { grid-template-columns: repeat(auto-fill,minmax(160px,1fr)); }
}

/* Custom Scrollbar */
::-webkit-scrollbar { width:10px; }
::-webkit-scrollbar-track { background: var(--color-bg); }
::-webkit-scrollbar-thumb { background: var(--color-accent); border-radius: var(--radius-pill); border:2px solid var(--color-bg); }
::-webkit-scrollbar-thumb:hover { background: var(--color-accent-hover); }

.empty-state { padding:2.5rem 1rem; text-align:center; font-size:.95rem; font-weight:500; color: var(--color-text-faint); border:1px solid var(--color-border); border-radius: var(--radius); margin-top:1.5rem; background: var(--color-bg-alt); }

.site-footer { text-align:center; padding:2.5rem 1rem 3rem; font-size:.8rem; color: var(--color-text-faint); display:flex; flex-direction:column; gap:.7rem; border-top: 1px solid var(--color-border); background: var(--color-bg); }
.site-footer strong { color: var(--color-text-dim); font-weight:600; }
.tiny { font-size:.7rem; letter-spacing:.05em; opacity:.5; }

.card-actions { margin-top:auto; padding-top:.75rem; display:flex; gap:.5rem; }
.icon-btn { background: var(--color-bg-soft); border:1px solid var(--color-border); color: var(--color-text-dim); padding:.5rem .8rem; border-radius: var(--radius-sm); font-size:.75rem; line-height:1.2; display:inline-flex; align-items:center; justify-content:center; gap:.3rem; cursor:pointer; font-weight:500; flex:1; transition: background .2s var(--ease), color .2s var(--ease), border-color .2s var(--ease); }
.icon-btn span { display:inline-flex; }
.icon-btn:hover { background: var(--color-surface); color: var(--color-text); border-color: var(--color-border-strong); }
.icon-btn:active { transform: scale(.97); }
.icon-btn.copy-btn.copied { background: var(--color-accent); color:#0a0a0a; border-color: var(--color-accent); }
.warp-btn { text-decoration:none; }

/* Motion reduction */
@media (prefers-reduced-motion: reduce) {
  .profile-card, .gallery-card, .gallery-link { transition:none !important; }
}
