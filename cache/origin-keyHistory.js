data:application/javascript,!function(e)%7B%22use%20strict%22%3Bif(!e.extensions.unsandboxed)throw%20new%20Error(%22'Key%20History'%20needs%20to%20be%20run%20unsandboxed.%22)%3Be.extensions.register(new%20class%7Bconstructor()%7Bthis.keyHistory%3D%5B%5D%2Cthis.max_key_history%3D100%2Cthis.keybinds%3D%5B%22Ctrl%22%2C%22Shift%22%2C%22Alt%22%5D%2Cthis.keysDown%3D%5B%5D%2Cthis.keysHit%3D%5B%5D%2Cthis.keyHitTimes%3D%5B%5D%2Cthis.pause%3D!1%2Cdocument.addEventListener(%22keydown%22%2C(e%3D%3Ethis.onKeyDown(e)))%2Cdocument.addEventListener(%22keyup%22%2C(e%3D%3Ethis.onKeyUp(e)))%2Cdocument.addEventListener(%22paste%22%2C(e%3D%3Ethis.onPaste(e)))%2Cconsole.log(%22Key%20History%20Extension%20Loaded%22)%7DgetInfo()%7Breturn%7Bid%3A%22MistKeyHistoryExtension%22%2Cname%3A%22Key%20History%22%2Ccolor1%3A%22%2336644E%22%2Cblocks%3A%5B%7Bopcode%3A%22getRecentKeys%22%2CblockType%3Ae.BlockType.REPORTER%2Ctext%3A%22get%20recent%20keys%22%7D%2C%7Bopcode%3A%22getKeysDown%22%2CblockType%3Ae.BlockType.REPORTER%2Ctext%3A%22keys%20down%22%7D%2C%7Bopcode%3A%22getFirstKey%22%2CblockType%3Ae.BlockType.REPORTER%2Ctext%3A%22get%20first%20key%22%7D%2C%7Bopcode%3A%22lastKeyPressed%22%2CblockType%3Ae.BlockType.REPORTER%2Ctext%3A%22get%20last%20key%22%7D%2C%22---%22%2C%7Bopcode%3A%22iskeyPressed%22%2CblockType%3Ae.BlockType.BOOLEAN%2Ctext%3A%22key%20%5BKEY%5D%20pressed%3F%22%2Carguments%3A%7BKEY%3A%7Btype%3Ae.ArgumentType.STRING%2CdefaultValue%3A%22a%22%7D%7D%7D%2C%7Bopcode%3A%22iskeyhit%22%2CblockType%3Ae.BlockType.BOOLEAN%2Ctext%3A%22key%20%5BKEY%5D%20hit%3F%22%2Carguments%3A%7BKEY%3A%7Btype%3Ae.ArgumentType.STRING%2CdefaultValue%3A%22a%22%7D%7D%7D%2C%22---%22%2C%7Bopcode%3A%22deleteFirstKey%22%2CblockType%3Ae.BlockType.COMMAND%2Ctext%3A%22delete%20the%20first%20key%20from%20history%22%7D%2C%7Bopcode%3A%22deleteAllKeys%22%2CblockType%3Ae.BlockType.COMMAND%2Ctext%3A%22delete%20all%20keys%20from%20history%22%7D%2C%7Bopcode%3A%22AddKey%22%2CblockType%3Ae.BlockType.COMMAND%2Ctext%3A%22add%20%5BKEY%5D%20to%20key%20history%22%2Carguments%3A%7BKEY%3A%7Btype%3Ae.ArgumentType.STRING%2CdefaultValue%3A%22a%22%7D%7D%7D%2C%22---%22%2C%7Bopcode%3A%22setMaxQueueSize%22%2CblockType%3Ae.BlockType.COMMAND%2Ctext%3A%22limit%20key%20history%20to%20%5BLENGTH%5D%20keys%22%2Carguments%3A%7BLENGTH%3A%7Btype%3Ae.ArgumentType.NUMBER%2CdefaultValue%3A100%7D%7D%7D%2C%7Bopcode%3A%22ignoreKeybinds%22%2CblockType%3Ae.BlockType.COMMAND%2Ctext%3A%22ignore%20keys%20%5BKEYS%5D%22%2Carguments%3A%7BKEYS%3A%7Btype%3Ae.ArgumentType.STRING%2CdefaultValue%3A'%5B%22Ctrl%22%2C%20%22Shift%22%2C%20%22Alt%22%5D'%7D%7D%7D%2C%22---%22%2C%7Bopcode%3A%22enableKeyHistory%22%2CblockType%3Ae.BlockType.COMMAND%2Ctext%3A%22enable%20key%20history%22%7D%2C%7Bopcode%3A%22disableKeyHistory%22%2CblockType%3Ae.BlockType.COMMAND%2Ctext%3A%22disable%20key%20history%22%7D%2C%22---%22%2C%7Bopcode%3A%22recentKeysAsRawJs%22%2CblockType%3Ae.BlockType.REPORTER%2Ctext%3A%22recent%20keys%20as%20raw%20object%22%7D%5D%7D%7DgetRecentKeys()%7Breturn%20JSON.stringify(this.keyHistory)%7DgetFirstKey()%7Blet%20t%3Dthis.keyHistory%5B0%5D%3Breturn%22object%22%3D%3Dtypeof%20t%3FJSON.stringify(t%3F%3F%22%22)%3Ae.Cast.toString(t%3F%3F%22%22)%7DdeleteFirstKey()%7Bthis.keyHistory.length%3E0%26%26this.keyHistory.shift()%7DdeleteAllKeys()%7Bthis.keyHistory%3D%5B%5D%7DsetMaxQueueSize(%7BLENGTH%3At%7D)%7Bthis.max_key_history%3De.Cast.toNumber(t)%7DAddKey(%7BKEY%3Ae%7D)%7Bthis.addKeyToHistory(e)%7DonKeyDown(t)%7Bconst%20s%3De.Cast.toString(t.key%3F%3F%22%22)%2Cy%3Ds.toLowerCase()%3Bthis.keysHit.includes(y)%7C%7C(this.keysHit.push(y)%2Cthis.keyHitTimes.push(Date.now()))%2Cthis.keysDown.includes(y)%7C%7Cthis.keysDown.push(y)%2Ct.metaKey%7C%7Ct.ctrlKey%7C%7Cthis.isKeybind(s)%7C%7Cthis.pause%7C%7Cthis.addKeyToHistory(s)%7DonKeyUp(t)%7Bconst%20s%3De.Cast.toString(t.key%3F%3F%22%22).toLowerCase().toLowerCase()%2Cy%3Dthis.keysDown.indexOf(s)%3B-1!%3D%3Dy%26%26this.keysDown.splice(y%2C1)%3Blet%20i%3Dthis.keysHit.indexOf(s)%3B-1!%3D%3Di%26%26(this.keysHit.splice(i%2C1)%2Cthis.keyHitTimes.splice(i%2C1))%7DonPaste(t)%7Bconst%20s%3Dt.clipboardData.getData(%22text%2Fplain%22)%3Blet%20y%3D%7Btype%3A%22paste%22%2Cdata%3Ae.Cast.toString(s)%7D%3Bthis.addKeyToHistory(y)%7DignoreKeybinds(%7BKEYS%3Ae%7D)%7Btry%7Bthis.keybinds%3DJSON.parse(e)%7Dcatch(e)%7B%7D%7DisKeybind(t)%7Breturn%20this.keybinds.includes(e.Cast.toString(t))%7DaddKeyToHistory(t)%7Bthis.keyHistory.length%3E%3Dthis.max_key_history%26%26this.keyHistory.shift()%2C%22object%22!%3Dtypeof%20t%26%26(t%3Dt.length%3E1%3F%7Btype%3A%22special%22%2Cdata%3At%7D%3A%7Btype%3A%22key%22%2Cdata%3Ae.Cast.toString(t)%7D)%2Cthis.keyHistory.push(t)%7DenableKeyHistory()%7Bthis.pause%3D!1%7DdisableKeyHistory()%7Bthis.pause%3D!0%7DlastKeyPressed()%7Blet%20t%3Dthis.keyHistory%5Bthis.keyHistory.length-1%5D%3F%3F%22%22%3Breturn%22object%22%3D%3Dtypeof%20t%3FJSON.stringify(t)%3Ae.Cast.toString(t)%7DiskeyPressed(%7BKEY%3At%7D)%7Breturn%20this.keysDown.includes(e.Cast.toString(t))%7Diskeyhit(%7BKEY%3At%7D)%7Bt%3De.Cast.toString(t)%3Blet%20s%3Dthis.keysHit.indexOf(t)%3Bif(-1!%3D%3Ds)%7Blet%20e%3D!1%3Breturn%20e%3DDate.now()-this.keyHitTimes%5Bs%5D%3C100%2Cthis.keyHitTimes%5Bs%5D%3D0%2Ce%7Dreturn!1%7DgetKeysDown()%7Breturn%20JSON.stringify(this.keysDown)%7DrecentKeysAsRawJs()%7Breturn%20this.keyHistory%7D%7D)%7D(Scratch)%3B
